# A vision-like pipeline workflow

# Packages up an entire dir. This is to support transitive
# dependencies in scripts (scripts calling other scripts)
package {id:"scripts", source:"vision-py/scripts"}

set inputDir = "/Users/rodneykinney/data/hackathon/png"

# Extract arrow head/tail
python {file:"ExtractArrows.py", package:"scripts"} -i {upload: ${inputDir}, type:"dir"} -o {out:"arrowDir", type:"dir"}

python {file:"ExtractBlobs.py", package:"scripts"} -i {upload: ${inputDir}, type:"dir"} -o {out:"blobsDir", type:"dir"}

python {file:"ExtractText.py", package:"scripts"} -i {upload: ${inputDir}, type:"dir"} -o {out:"textDir", type:"dir"}

python {file:"ExtractRelations.py", package:"scripts"} -i {upload: ${inputDir}, type:"dir"} -a {ref:"arrowDir"} -b {ref:"blobsDir"} -t {ref:"textDir"} -o {out:"relationsDir", type:"dir"}
